/*! baidu-map 2014-07-29 */
/*!luzuoquan*/
!function(){var a=function(){};a.prototype={},window.Control=a}();var config={initUrl:{getMapData:"service/getData.php"}};!function(a,b,c,d){{var e=new c;new d,document.getElementById("map-container")}b.ajax({url:a.initUrl.getMapData,type:"POST",dataType:"json",data:{},error:function(){},success:function(a){var b="";e.loadData(a.d),e.initMap(a.d),b=e.pageList(a.d)}})}(config,jQuery,View,Control),function(){var a=function(){};a.prototype={getModelData:function(){},setModelData:function(){}},window.Model=a}(),function(){var a=function(a){this.pageCount=2,this.oMap=null,this.DataSet=a||null,this.mapConfig={defaultCity:"重庆",defaultZoom:12,defaultMapType:BMAP_HYBRID_MAP,defaultMapId:"map-container",defaultPoints:new BMap.Point(106.524203,29.516936),maxZoom:17,minZoom:9},this.polygonOp={strokeColor:"red",fillColor:"yellow",strokeWeight:2,strokeOpacity:.7,fillOpacity:.3,strokeStyle:"solid"},this.polygonHOp={strokeColor:"red",fillColor:"yellow",strokeWeight:3,strokeOpacity:.7,fillOpacity:.5,strokeStyle:"solid"}};a.prototype={loadData:function(a){var b=document.getElementById("datalist");$(b).tmpl(a).appendTo(".data-container")},pageList:function(a){for(var b,c=this.pageCount,d=[],e=0,f=0;b=a[f];f++)f%c==0&&(d[e]=[],e++),d[e-1].push(b);return d},overlayPoly:function(a){var b=this;if(a)for(var c=a.length,d=0;c>d;d++){if(a[d].points){var e=this._pointsToOverlay(a[d].points),f=new BMap.Polygon(e,b.polygonOp);oMap.addOverlay(f)}if(a[d].point){var g=this._pointToOverlay(a[d].point),h=new BMap.Marker(g);oMap.addOverlay(h)}}},overlayMarker:function(a){if(a){new BMap.Marker(new BMap.Point(a))}},_pointsToOverlay:function(a){for(var b=[],c=a.split("|"),d=c.length,e=0;d>e;e++){var f=c[e].split(",");b.push(new BMap.Point(f[0],f[1]))}return b},_pointToOverlay:function(a){var b=a.split(","),c=new BMap.Point(b[0],b[1]);return c},initMap:function(a){var b=this;oMap=new BMap.Map(b.mapConfig.defaultMapId),oMap.setMapType(b.mapConfig.defaultMapType),oMap.centerAndZoom(b.mapConfig.defaultPoints,b.mapConfig.defaultZoom),oMap.enableScrollWheelZoom(),oMap.addControl(new BMap.NavigationControl),oMap.enableKeyboard(),b.overlayPoly(a,!0),b.overlayMarker(a,!0)}},window.View=a}();